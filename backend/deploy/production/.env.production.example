# Production Environment Configuration
# Copy this file to .env and configure all values

# ================================
# CRITICAL: PRODUCTION HARDENING
# ================================
ENVIRONMENT=production
SAFE_MODE=false
ENABLE_DOCS=false
ENABLE_DEBUG=false
FORCE_HTTPS=true
SECURE_COOKIES=true

# ================================
# PRODUCTION DOMAINS & CORS
# ================================
# Replace with actual production domains
PRODUCTION_DOMAIN=yourdomain.com
API_DOMAIN=api.yourdomain.com
APP_DOMAIN=app.yourdomain.com

# CORS Configuration (strict for production)
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com,https://app.yourdomain.com
TRUSTED_HOSTS=yourdomain.com,*.yourdomain.com,api.yourdomain.com,app.yourdomain.com

# Security Headers
CORS_CREDENTIALS=true
CORS_MAX_AGE=3600
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Authorization,Content-Type,X-Requested-With,Accept,Origin

# ================================
# DATABASE & REDIS
# ================================
DATABASE_URL=postgresql://user:password@prod-db-host:5432/oneshot_prod
REDIS_URL=redis://prod-redis-host:6379/0

# ================================
# SECURITY SECRETS (MUST ROTATE)
# ================================
JWT_SECRET=CHANGE_THIS_TO_SECURE_RANDOM_STRING_32_CHARS_MIN
JWT_SECRET_VERSION=v1
WEBHOOK_SECRET_VERSION=v1
HMAC_SECRET=CHANGE_THIS_TO_SECURE_WEBHOOK_SECRET

# ================================
# CORS & SECURITY
# ================================
ALLOWED_ORIGINS=https://app.yourdomain.com,https://www.yourdomain.com
TRUSTED_HOSTS=app.yourdomain.com,www.yourdomain.com,api.yourdomain.com
CORS_CREDENTIALS=true

# ================================
# CLOUD STORAGE
# ================================
S3_BUCKET=oneshot-prod-storage
S3_KEY=YOUR_PROD_AWS_ACCESS_KEY
S3_SECRET=YOUR_PROD_AWS_SECRET_KEY
S3_REGION=us-east-1

# ================================
# GPU PROVIDERS (REAL ONLY)
# ================================
GPU_PROVIDER=runpod
ENFORCE_REAL_PROVIDERS=true
DISABLE_MOCK_PROVIDERS=true

# RunPod Configuration
RUNPOD_API_KEY=YOUR_RUNPOD_API_KEY
RUNPOD_ENDPOINT_ID=YOUR_RUNPOD_ENDPOINT_ID

# ComfyUI Configuration (if using)
COMFY_LOCAL_URL=https://your-comfyui-instance.com

# ================================
# PAYMENTS & BILLING
# ================================
SUPERWALL_SECRET=YOUR_PRODUCTION_SUPERWALL_SECRET
SUPERWALL_SIGNING_SECRET=YOUR_PRODUCTION_SUPERWALL_SIGNING_SECRET
DEV_BILLING_MODE=live
ENTITLEMENTS_DEFAULT_PLAN=free

# ================================
# MONITORING & OBSERVABILITY
# ================================
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_TRACES_SAMPLE_RATE=0.05
SENTRY_PROFILES_SAMPLE_RATE=0.01
RELEASE_VERSION=v1.0.0
ENABLE_METRICS=true

# ================================
# RATE LIMITING & PERFORMANCE
# ================================
ENABLE_RATE_LIMITING=true
GLOBAL_RATE_LIMIT=1000/hour
MAX_FILE_SIZE_MB=20
MAX_INPUT_MB=20

# ================================
# PRIVACY & CONTENT SAFETY
# ================================
RETENTION_DAYS=30
NSFW_MODE=block
WATERMARK_DEFAULT=true
ENABLE_EXIF_STRIPPING=true
ENABLE_WATERMARK=true
ENABLE_NSFW_DETECTION=true
ENABLE_CONSENT_ENFORCEMENT=true

# ================================
# SECURITY THRESHOLDS
# ================================
NSFW_CONFIDENCE_THRESHOLD=0.7
SKIN_RATIO_THRESHOLD=0.35
FLESH_TONE_THRESHOLD=0.25

# ================================
# OPERATIONAL SETTINGS
# ================================
LOG_LEVEL=INFO
SESSION_TIMEOUT_MINUTES=60
WEBHOOK_TIMEOUT_SECONDS=30
WEBHOOK_RETRY_DELAYS=60,300,1800,7200

# ================================
# APPLICATION SETTINGS
# ================================
APP_VERSION=2.0.0
DEFAULT_CREDITS=10
OUTPUT_FORMAT=png
OUTPUT_QUALITY=95
MAX_IMAGE_DIMENSION=8192
MIN_IMAGE_DIMENSION=64

# ================================
# FALLBACK LIMITS
# ================================
FALLBACK_DAILY_JOB_LIMIT=5
FALLBACK_CONCURRENT_JOB_LIMIT=1
FALLBACK_MAX_SIDE_LIMIT=512

# ================================
# TRAEFIK & SECURITY CONFIGURATION  
# ================================
# ACME/SSL Configuration
ACME_EMAIL=security@yourdomain.com
CLOUDFLARE_DNS_API_TOKEN=your_cloudflare_api_token_here
CLOUDFLARE_EMAIL=your_cloudflare_email_here

# Traefik Admin Access (generate with: htpasswd -nb admin your_password)
TRAEFIK_ADMIN_USER=admin
TRAEFIK_ADMIN_PASSWORD_HASH=$2y$10$example_hash_replace_with_real_hash

# Security Settings
TLS_MIN_VERSION=VersionTLS13
HSTS_MAX_AGE=31536000  # 1 year
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# Rate Limiting
RATE_LIMIT_BURST=50
RATE_LIMIT_AVERAGE=25
API_RATE_LIMIT_BURST=20
API_RATE_LIMIT_AVERAGE=10

# Logging
TRAEFIK_LOG_LEVEL=WARN
ACCESS_LOG_RETENTION_DAYS=30
ERROR_LOG_RETENTION_DAYS=7